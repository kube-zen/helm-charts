apiVersion: v1
kind: ConfigMap
metadata:
  name: zen-agent-config
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/name: zen-agent
    app.kubernetes.io/component: security-remediation
data:
  # Multi-tenancy identifiers (set by SaaS UI during registration)
  cluster-id: {{ .Values.cluster.id | quote }}
  tenant-id: {{ .Values.tenant.id | quote }}
  
  # SaaS API endpoints
  saas-api-url: {{ .Values.saas.endpoint | quote }}
  saas-ws-url: {{ .Values.saas.endpoint | replace "https://" "wss://" | replace "http://" "ws://" }}/ws
  
  # Agent behavior configuration
  sync-interval: "30s"
  status-sync-interval: "5m"
  scheduler-interval: "1m"
  watchdog-interval: "1m"
  
  # Namespace where CRDs are stored
  watch-namespace: {{ .Release.Namespace | quote }}
  
  # Log level (debug, info, warn, error, crit)
  log-level: "info"
