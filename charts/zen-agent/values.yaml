# zen-agent configuration
image:
  repository: kubezen/zen-agent
  tag: "1.0.0"  # Use semantic versioning (immutable)
  pullPolicy: IfNotPresent  # Immutable tags don't need Always

# zen-watcher dependency (installed automatically)
zen-watcher:
  enabled: true
  image:
    repository: kubezen/zen-watcher
    tag: "1.0.6"  # Use semantic versioning (immutable)
    pullPolicy: IfNotPresent
  
  # Auto-detect security tools (enabled by default)
  autoDetect:
    enabled: true  # Continuously detect installed security tools
  
  # Optional: Override auto-detected namespaces
  namespaces:
    kyverno: "kyverno"
    trivy: "trivy-system"
    falco: "falco"
    kubeBench: "kube-bench"
  
  # NetworkPolicy
  networkPolicy:
    enabled: true  # Always enabled for security

# Multi-tenancy configuration (REQUIRED - set by UI during registration)
tenant:
  id: ""  # REQUIRED: Tenant UUID from SaaS platform

cluster:
  id: ""  # REQUIRED: Cluster UUID from SaaS platform

# SaaS connection
saas:
  endpoint: "https://api.kube-zen.io"  # Production API endpoint

# Bootstrap authentication (REQUIRED for first-time setup)
# Per-cluster HMAC keys are derived via HKDF - no keys shipped in Helm
bootstrap:
  token: ""  # REQUIRED: One-time bootstrap token (15m TTL)
             # Generate via UI or: ./scripts/generate-bootstrap-token.sh
             # Token is consumed on first agent start and deleted from Secret
             # HMAC key is derived and stored automatically

# Legacy PSP support (disabled by default, clusters without PSP will fail if enabled)
psp:
  enabled: false

# Resource limits
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 128Mi
